import{x as h,e as i}from"./app-ac863ed7.js";import{u as v}from"./user-flashes-store.store-83d453dc.js";import{A as E}from"./ApiService-ed296c82.js";class m extends E{constructor(...e){super(...e)}static make(){return new m(this.BASE_URL,"templates",this.VERSION)}getTemplates(e){return this.axios.get("/",{params:e})}createTemplate(e){return this.axios.post("/",e)}updateTemplate(e,l){return this.axios.patch(`/${e}`,l)}deleteTemplate(e,l){return this.axios.delete(`/${e}`,l)}}const y=h("templatesStore",()=>{const s=v(),e=m.make(),l=i(),c=i(),r=i({}),n=i(!1);async function o(t=1,p){const{data:a}=await e.getTemplates({page:t,per_page:p});l.value=a.resp.templates_paginated.data,c.value=a.resp.templates_paginated}async function d(t){o(t.newPage,t.perPage)}async function g(t){var p;if(t){const{data:a}=await e.deleteTemplate(t);(p=a.resp)!=null&&p.status?(s.showSuccess("Deleted template"),o()):s.reportError("Error updating template, please try again later")}else s.reportError("A template ID is required.")}async function f(){var t,p;if(r.value.id){const{data:a}=await e.updateTemplate(r.value.id,r.value);(t=a.resp)!=null&&t.status?(s.showSuccess("Updated template"),u(),o()):s.reportError("Error updating template, please try again later")}else{const{data:a}=await e.createTemplate(r.value);(p=a.resp)!=null&&p.template?(s.showSuccess("Added a new template"),u(),o()):s.reportError("Error creating template, please try again later")}}function T(t){r.value={...t},n.value=!0}function u(){n.value=!1,r.value={}}return{api:e,templates:l,paginationData:c,editingTemplate:r,showTemplateForm:n,getTemplates:o,handlePaginationEvent:d,saveTemplate:f,triggerEditTemplateForm:T,closeTemplateModal:u,deleteTemplate:g}});export{y as u};
