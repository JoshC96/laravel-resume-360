import{x as Z,e as o}from"./app-ac863ed7.js";import{u as _}from"./user-flashes-store.store-83d453dc.js";import{A as ee}from"./ApiService-ed296c82.js";class q extends ee{constructor(...e){super(...e)}static make(){return new q(this.BASE_URL,"user",this.VERSION)}getProfile(){return this.axios.get("/")}updateSettings(e){return this.axios.post("/settings",e)}getReferees(){return this.axios.get("/referees")}createReferee(e){return this.axios.post("/referees",e)}updateReferee(e,a){return this.axios.patch(`/referees/${e}`,a)}deleteReferee(e,a){return this.axios.delete(`/referees/${e}`,a)}getBio(){return this.axios.get("/bio")}updateBio(e){return this.axios.patch("/bio",{bio:e})}getWorkExperience(){return this.axios.get("/work-experiences")}createWorkExperience(e){return this.axios.post("/work-experiences",e)}updateWorkExperience(e,a){return this.axios.patch(`/work-experiences/${e}`,a)}deleteWorkExperience(e,a){return this.axios.patch(`/work-experiences/${e}`,a)}getEducation(){return this.axios.get("/qualifications")}createQualification(e){return this.axios.post("/qualifications",e)}updateQualification(e,a){return this.axios.patch(`/qualifications/${e}`,a)}deleteQualification(e,a){return this.axios.patch(`/qualifications/${e}`,a)}getPublications(){return this.axios.get("/publications")}createPublication(e){return this.axios.post("/publications",e)}updatePublication(e,a){return this.axios.patch(`/publications/${e}`,a)}deletePublication(e,a){return this.axios.patch(`/publications/${e}`,a)}getCertifications(){return this.axios.get("/certifications")}createCertification(e){return this.axios.post("/certifications",e)}updateCertification(e,a){return this.axios.patch(`/certifications/${e}`,a)}deleteCertification(e,a){return this.axios.patch(`/certifications/${e}`,a)}getLicences(){return this.axios.get("/licences")}createLicence(e){return this.axios.post("/licences",e)}updateLicence(e,a){return this.axios.patch(`/licences/${e}`,a)}deleteLicence(e,a){return this.axios.patch(`/licences/${e}`,a)}}const ae=Z("userProfileStore",()=>{const i=_(),e=q.make(),a=o(""),F=o([]),R=o([]),L=o([]),C=o([]),M=o([]),$=o([]),d=o(!1),c=o({}),h=o(!1),s=o({}),g=o(!1),u=o({}),v=o(!1),l=o({}),E=o(!1),f=o({}),x=o(!1),p=o({});async function n(){const{data:t}=await e.getProfile(),r=t.resp.profile;a.value=r.bio,C.value=r.licences,R.value=r.workExperiences,L.value=r.qualifications,M.value=r.certifications,$.value=r.publications,F.value=r.referees}async function Q(){var r;const{data:t}=await e.updateBio(a.value);(r=t.resp)!=null&&r.status?i.showSuccess("Updated bio"):i.reportError("Error updating bio, please try again later")}async function A(){var t,r;if(c.value.id){const{data:P}=await e.updateReferee(c.value.id,c.value);(t=P.resp)!=null&&t.status?(i.showSuccess("Updated referee"),w(),n()):i.reportError("Error updating referee, please try again later")}else{const{data:P}=await e.createReferee(c.value);(r=P.resp)!=null&&r.referee?(i.showSuccess("Added a new referee"),w(),n()):i.reportError("Error creating referee, please try again later")}}async function U(){var t;(t=s.value)!=null&&t.id?e.updateWorkExperience(s.value.id,s.value).then(function(r){r.status?(i.showSuccess("Updated work experience"),n()):i.reportError("Error updating work experience")}).catch(()=>{i.reportError("Error updating work experience")}).finally(()=>{b()}):e.createWorkExperience(s.value).then(function(r){r.status?(i.showSuccess("New work experience added"),n()):i.reportError("Error creating new work experience")}).catch(()=>{i.reportError("Error creating work experience")}).finally(()=>{b()})}async function N(){var t;(t=u.value)!=null&&t.id?e.updateQualification(u.value.id,u.value).then(function(r){r.status?(i.showSuccess("Updated qualification"),n()):i.reportError("Error updating qualification")}).catch(()=>{i.reportError("Error updating qualification")}).finally(()=>{S()}):e.createQualification(u.value).then(function(r){r.status?(i.showSuccess("New qualification added"),n()):i.reportError("Error creating new qualification")}).catch(()=>{i.reportError("Error creating new qualification")}).finally(()=>{S()})}async function W(){var t;(t=l.value)!=null&&t.id?e.updatePublication(l.value.id,l.value).then(function(r){r.status?(i.showSuccess("Updated publication"),n()):i.reportError("Error updating qualification")}).catch(()=>{i.reportError("Error updating qualification")}).finally(()=>{y()}):e.createPublication(l.value).then(function(r){r.status?(i.showSuccess("New publication added"),n()):i.reportError("Error creating new publication")}).catch(()=>{i.reportError("Error creating new publication")}).finally(()=>{y()})}async function B(){var t;(t=f.value)!=null&&t.id?e.updateLicence(f.value.id,f.value).then(function(r){r.status?(i.showSuccess("Updated licence"),n()):i.reportError("Error updating licence")}).catch(()=>{i.reportError("Error updating licence")}).finally(()=>{k()}):e.createLicence(f.value).then(function(r){r.status?(i.showSuccess("New licence added"),n()):i.reportError("Error creating new licence")}).catch(()=>{i.reportError("Error creating licence")}).finally(()=>{k()})}async function I(){var t;(t=p.value)!=null&&t.id?e.updateCertification(p.value.id,p.value).then(function(r){r.status?(i.showSuccess("Updated certification"),n()):i.reportError("Error updating certification")}).catch(()=>{i.reportError("Error updating certification")}).finally(()=>{m()}):e.createCertification(p.value).then(function(r){r.status?(i.showSuccess("New certification added"),n()):i.reportError("Error creating new certification")}).catch(()=>{i.reportError("Error creating certification")}).finally(()=>{m()})}function O(t){c.value={...t},d.value=!0}function V(){d.value=!0}function w(){c.value={},d.value=!1}function j(t){s.value={...t},h.value=!0}function z(){h.value=!0}function b(){s.value={},h.value=!1}function D(t){u.value={...t},g.value=!0}function G(){g.value=!0}function S(){u.value={},g.value=!1}function H(t){l.value={...t},v.value=!0}function J(){v.value=!0}function y(){l.value={},v.value=!1}function K(t){f.value={...t},E.value=!0}function T(){E.value=!0}function k(){f.value={},E.value=!1}function X(t){p.value={...t},x.value=!0}function Y(){x.value=!0}function m(){p.value={},x.value=!1}return{api:e,bio:a,licences:C,workExperiences:R,qualifications:L,certifications:M,publications:$,referees:F,showRefereeModal:d,editingReferee:c,showExperienceModal:h,editingExperience:s,showQualificationModal:g,editingQualification:u,showPublicationModal:v,editingPublication:l,showLicenceModal:E,editingLicence:f,showCertificationModal:x,editingCertification:p,getProfile:n,saveBio:Q,saveExperience:U,saveReferee:A,saveQualification:N,savePublication:W,saveLicence:B,saveCertification:I,triggerEditRefereeForm:O,triggerAddRefereeForm:V,closeRefereeModal:w,triggerEditExperienceForm:j,triggerAddExperienceForm:z,closeExperienceModal:b,triggerEditQualificationForm:D,triggerAddQualificationForm:G,closeQualificationModal:S,triggerEditPublicationForm:H,triggerAddPublicationForm:J,closePublicationModal:y,triggerEditLicenceForm:K,triggerAddLicenceForm:T,closeLicenceModal:k,triggerEditCertificationForm:X,triggerAddCertificationForm:Y,closeCertificationModal:m}},{persist:!1});export{q as P,ae as u};
